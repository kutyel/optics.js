function t(t,r){for(var e=0;e<r.length;e++){var n=r[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function r(r,e,n){return e&&t(r.prototype,e),n&&t(r,n),r}function e(){return(e=Object.assign||function(t){for(var r=1;r<arguments.length;r++){var e=arguments[r];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}return t}).apply(this,arguments)}function n(t,r){t.prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r}function o(t){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function i(t,r){return(i=Object.setPrototypeOf||function(t,r){return t.__proto__=r,t})(t,r)}function u(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function s(t,r,e){return(s=u()?Reflect.construct:function(t,r,e){var n=[null];n.push.apply(n,r);var o=new(Function.bind.apply(t,n));return e&&i(o,e.prototype),o}).apply(null,arguments)}function c(t){var r="function"==typeof Map?new Map:void 0;return(c=function(t){if(null===t||-1===Function.toString.call(t).indexOf("[native code]"))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==r){if(r.has(t))return r.get(t);r.set(t,e)}function e(){return s(t,arguments,o(this).constructor)}return e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),i(e,t)})(t)}function a(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function f(t){var r=function(t,r){if("object"!=typeof t||null===t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==typeof r?r:String(r)}var p=function(t){function r(r){var e;return e=t.call.apply(t,[this].concat([].slice.call(arguments,1)))||this,Error.captureStackTrace&&Error.captureStackTrace(a(e),l),e.name="OpticCreationError",e.optic=r,e}return n(r,t),r}(c(Error)),l=function(t){function r(e,n){var o;return o=t.call.apply(t,[this].concat([].slice.call(arguments,2)))||this,Error.captureStackTrace&&Error.captureStackTrace(a(o),r),o.name="OpticComposeError",o.optic1=e,o.optic2=n,o}return n(r,t),r}(c(Error)),v=function(t){function r(r,e){var n;return n=t.call.apply(t,[this].concat([].slice.call(arguments,2)))||this,Error.captureStackTrace&&Error.captureStackTrace(a(n),l),n.name="UnavailableOpticOperationError",n.operation=r,n.optic=e,n}return n(r,t),r}(c(Error)),h=function t(r,e){void 0===e&&(e=r.length);var n=[].slice.call(arguments,2);return e<=n.length?r.apply(void 0,n):function(){return t.apply(void 0,[r,e].concat(n,[].slice.call(arguments)))}},y=h(function(t,r){return r[t]}),w=h(function(t,r,n){var o;return n[t]?e({},n,((o={})[t]=r,o)):n}),g=h(function(t,r,e){return e.map(function(e,n){return n==t?r:e})}),d=function(){function t(t,r){this.reduce=t||function(t,e,n){return r(n).reduce(t,e)},this.toArray=r||function(r){return t(function(t,r){return t.concat(r)},[],r)}}return r(t,[{key:"asFold",get:function(){return this}}]),t}(),m=h(function(t){return new d(t,null)}),x=h(function(t){return new d(null,t)}),k=h(function(t,r){return new d(t,r)}),b=Symbol("notFound"),O=function(t){return t===b},A=function(t){return O(t)?[]:[t]},P=function(){function t(t){var r=this;this.preview=t,this.reduce=function(t,e,n){return A(r.preview(n)).reduce(t,e)},this.toArray=function(t){return A(r.preview(t))}}return r(t,[{key:"asFold",get:function(){return k(this.reduce,this.toArray)}},{key:"asPartialGetter",get:function(){return this}}]),t}(),S=h(function(t){return new P(t)}),F=function(){function t(t){var r=this;this.get=t,this.reduce=function(t,e,n){return t(e,r.get(n))},this.toArray=function(t){return[r.get(t)]},this.preview=this.get}return r(t,[{key:"asFold",get:function(){return k(this.reduce,this.toArray)}},{key:"asPartialGetter",get:function(){return S(this.get)}},{key:"asGetter",get:function(){return this}}]),t}(),G=h(function(t){return new F(t)}),T=function(){function t(t){var r=this;this.over=t,this.set=function(t,e){return r.over(function(){return t},e)}}return r(t,[{key:"asSetter",get:function(){return this}}]),t}(),E=h(function(t){return new T(t)}),R=function(){function t(t,r,e){var n=this;this.reduce=t||function(t,e,n){return r(n).reduce(t,e)},this.toArray=r||function(r){return t(function(t,r){return t.concat(r)},[],r)},this.over=e,this.set=function(t,r){return n.over(function(){return t},r)}}return r(t,[{key:"asSetter",get:function(){return E(this.over)}},{key:"asFold",get:function(){return k(this.reduce,this.toArray)}},{key:"asTraversal",get:function(){return this}}]),t}(),j=h(function(t,r){return new R(t,null,r)}),_=h(function(t,r){return new R(null,t,r)}),L=h(function(t,r,e){return new R(t,r,e)}),C=L(function(t,r,e){return e.reduce(t,r)},function(t){return[].concat(t)},function(t,r){return r.map(t)}),N=_(function(t){return[].concat(Object.entries(t))},function(t,r){return Object.fromEntries([].concat(Object.entries(r)).map(t))}),M=function(){function t(t,r){var e=this;this.preview=t,this.set=r,this.over=function(t,r){var n=e.preview(r);return O(n)?r:e.set(t(n),r)},this.reduce=function(t,r,n){return A(e.preview(n)).reduce(t,r)},this.toArray=function(t){return A(e.preview(t))}}return r(t,[{key:"asSetter",get:function(){return E(this.over)}},{key:"asFold",get:function(){return k(this.reduce,this.toArray)}},{key:"asTraversal",get:function(){return L(this.reduce,this.toArray,this.over)}},{key:"asPartialGetter",get:function(){return S(this.preview)}},{key:"asOptional",get:function(){return this}}]),t}(),U=h(function(t,r){return new M(t,r)}),I=function(t){return U(function(r){return r[t]||b},function(r,n){var o;return n[t]?e({},n,((o={})[t]=r,o)):n})},D=function(t){return U(function(r){return r[t]||b},function(r,e){return e[t]?g(t,r,e):e})},B=function(){function t(t,r){var e=this;this.get=t,this.set=r,this.over=function(t,r){return e.set(t(e.get(r)),r)},this.reduce=function(t,r,n){return t(r,e.get(n))},this.toArray=function(t){return[e.get(t)]},this.preview=this.get}return r(t,[{key:"asSetter",get:function(){return E(this.over)}},{key:"asFold",get:function(){return k(this.reduce,this.toArray)}},{key:"asTraversal",get:function(){return L(this.reduce,this.toArray,this.over)}},{key:"asOptional",get:function(){return U(this.get,this.set)}},{key:"asGetter",get:function(){return G(this.get)}},{key:"asPartialGetter",get:function(){return S(this.get)}},{key:"asLens",get:function(){return this}}]),t}(),q=h(function(t,r){return new B(t,r)}),z=function(t){return q(y(t),g(t))},H=function(t){return q(function(r){return O(r)?b:r[t]||b},function(r,n){var o;return O(r)?function(t,r){if(null==t)return{};var e,n,o={},i=Object.keys(t);for(n=0;n<i.length;n++)r.indexOf(e=i[n])>=0||(o[e]=t[e]);return o}(n,[t].map(f)):e({},n,((o={})[t]=r,o))})},J=function(){function t(t){this.review=t}return r(t,[{key:"asReviewer",get:function(){return this}}]),t}(),K=h(function(t){return new J(t)}),Q=function(){function t(t,r,e){var n=this;this.preview=t,this.set=r,this.review=e,this.over=function(t,r){var e=n.preview(r);return O(e)?r:n.set(t(e),r)},this.reduce=function(t,r,e){return A(n.preview(e)).reduce(t,r)},this.toArray=function(t){return A(n.preview(t))}}return r(t,[{key:"asSetter",get:function(){return E(this.over)}},{key:"asFold",get:function(){return k(this.reduce,this.toArray)}},{key:"asTraversal",get:function(){return L(this.reduce,this.toArray,this.over)}},{key:"asPartialGetter",get:function(){return S(this.preview)}},{key:"asOptional",get:function(){return U(this.preview,this.set)}},{key:"asReviewer",get:function(){return K(this.review)}},{key:"asPrism",get:function(){return this}}]),t}(),V=h(function(t,r,e){return new Q(t,r,e)}),W=function(t,r){return Object.keys(t).every(function(e){return r&&r[e]&&r[e]===t[e]})},X=function(){function t(t,r){var e=this;this.get=t,this.review=r,this.set=function(t){return e.review(t)},this.over=function(t,r){return e.review(t(e.get(r)))},this.reduce=function(t,r,n){return t(r,e.get(n))},this.toArray=function(t){return[e.get(t)]},this.preview=this.get}return r(t,[{key:"asSetter",get:function(){return E(this.over)}},{key:"asFold",get:function(){return k(this.reduce,this.toArray)}},{key:"asTraversal",get:function(){return L(this.reduce,this.toArray,this.over)}},{key:"asOptional",get:function(){return U(this.get,this.set)}},{key:"asPrism",get:function(){return V(this.get,this.set,this.review)}},{key:"asReviewer",get:function(){return K(this.review)}},{key:"asGetter",get:function(){return G(this.get)}},{key:"asPartialGetter",get:function(){return S(this.get)}},{key:"asLens",get:function(){return q(this.get,this.set)}},{key:"asIso",get:function(){return this}}]),t}(),Y=h(function(t,r){return new X(t,r)}),Z=function(t,r){return function(e){var n=t(e);return O(n)?b:r(n)}},$=function(t,r){return function(e,n,o){return r(function(r,n){return t(e,r,n)},n,o)}},tt=function(t,r){if(t.asLens&&r.asLens){var e=t.asLens,n=r.asLens;return q(function(t){return n.get(e.get(t))},function(t,r){return e.over(function(r){return n.set(t,r)},r)})}if(t.asPrism&&r.asPrism){var o=t.asPrism,i=r.asPrism;return V(Z(o.preview,i.preview),function(t,r){return o.over(function(r){return i.set(t,r)},r)},function(t){return i.review(o.review(t))})}if(t.asOptional&&r.asOptional){var u=t.asOptional,s=r.asOptional;return U(Z(u.preview,s.preview),function(t,r){return u.over(function(r){return s.set(t,r)},r)})}if(t.asTraversal&&r.asTraversal){var c=t.asTraversal,a=r.asTraversal;return L($(c.reduce,a.reduce),function(t){return c.toArray(t).flatMap(function(t){return a.toArray(t)})},function(t,r){return c.over(function(r){return a.over(t,r)},r)})}if(t.asGetter&&r.asGetter){var f=t.asGetter,p=r.asGetter;return G(function(t){return p.get(f.get(t))})}if(t.asPartialGetter&&r.asPartialGetter)return S(Z(t.asPartialGetter.preview,r.asPartialGetter.preview));if(t.asFold&&r.asFold){var v=t.asFold,h=r.asFold;return k($(v.reduce,h.reduce),function(t){return v.toArray(t).flatMap(function(t){return h.toArray(t)})})}if(t.asSetter&&r.asSetter){var y=t.asSetter,w=r.asSetter;return E(function(t,r){return y.over(function(r){return w.over(t,r)},r)})}if(t.asReviewer&&r.asReviewer){var g=t.asReviewer,d=r.asReviewer;return K(function(t){return d.review(g.review(t))})}throw new l(t.constructor.name,r.constructor.name,"incompatible optics")},rt=function(t){return"string"==typeof t||t instanceof String?H(t):"number"!=typeof t||isNaN(t)?t:z(t)},et=function(){return[].slice.call(arguments).flat().map(rt).reduce(tt)},nt=et,ot=et,it=h(function(t,r,e,n){if(t.asFold)return t.asFold.reduce(r,e,n);throw new v("reduce",t.constructor.name,"reduce is not supported by "+t.constructor.name)}),ut=h(function(t,r){if(t.asFold)return t.asFold.toArray(r);throw new v("toArray",t.constructor.name,"toArray is not supported by "+t.constructor.name)}),st=h(function(t,r){if(t.asPartialGetter)return t.asPartialGetter.preview(r);throw new v("preview",t.constructor.name,"preview is not supported by "+t.constructor.name)}),ct=h(function(t,r){if(t.asGetter)return t.asGetter.get(r);throw new v("view/get",t.constructor.name,"view/get is not supported by "+t.constructor.name)}),at=(h(function(t,r,e){if(t.asSetter)return t.asSetter.set(r,e);throw new v("set",t.constructor.name,"set is not supported by "+t.constructor.name)}),h(function(t,r,e){if(t.asSetter)return t.asSetter.over(r,e);throw new v("over",t.constructor.name,"over is not supported by "+t.constructor.name)})),ft=h(function(t,r){if(t.asReviewer)return t.asReviewer.review(r);throw new v("review",t.constructor.name,"review is not supported by "+t.constructor.name)});exports.OpticComposeError=l,exports.OpticCreationError=p,exports.UnavailableOpticOperationError=v,exports.alter=H,exports.compose=function(){var t=arguments;return function(r){return[].slice.call(t).reduceRight(function(t,r){return r(t)},r)}},exports.composeOptics=et,exports.curry=h,exports.entries=N,exports.fold=k,exports.foldFromReduce=m,exports.foldFromToArray=x,exports.get=y,exports.getter=G,exports.has=function(t){return V(function(r){return W(t,r)?e({},r):b},function(r,n){return W(t,n)?e({},r,t):e({},n)},function(r){return e({},r,t)})},exports.isNotFound=O,exports.iso=Y,exports.ix=z,exports.lens=q,exports.maybe=function(t){if("string"==typeof t||t instanceof String)return I(t);if("number"==typeof t&&!isNaN(t))return D(t);if(t.asLens){var r=t.asLens;return U(r.get,r.set)}throw new p("Optional",typeof t+" cannot be turned into optional")},exports.mustBePresent=function(t){return q(y(t),w(t))},exports.notFound=b,exports.notFoundToList=A,exports.optic=nt,exports.optional=U,exports.optionalIx=D,exports.optionalProp=I,exports.over=at,exports.partialGetter=S,exports.path=ot,exports.preview=st,exports.prism=V,exports.reduce=it,exports.review=ft,exports.reviewer=K,exports.set=w,exports.setIndex=g,exports.setter=E,exports.single=function(t){return Y(function(r){return r[t]},function(r){var e;return(e={})[t]=r,e})},exports.toArray=ut,exports.toUpper=function(t){return t.toUpperCase()},exports.traversal=L,exports.traversalFromReduce=j,exports.traversalFromToArray=_,exports.values=C,exports.view=ct;
//# sourceMappingURL=optic.js.map
