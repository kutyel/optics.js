!function(t,r){"object"==typeof exports&&"undefined"!=typeof module?r(exports):"function"==typeof define&&define.amd?define(["exports"],r):r((t=t||self).opticsJs={})}(this,function(t){function r(t,r){for(var e=0;e<r.length;e++){var n=r[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function e(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}function n(){return(n=Object.assign||function(t){for(var r=1;r<arguments.length;r++){var e=arguments[r];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}return t}).apply(this,arguments)}function i(t,r){t.prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function o(t,r){return(o=Object.setPrototypeOf||function(t,r){return t.__proto__=r,t})(t,r)}function c(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function s(t,r,e){return(s=c()?Reflect.construct:function(t,r,e){var n=[null];n.push.apply(n,r);var i=new(Function.bind.apply(t,n));return e&&o(i,e.prototype),i}).apply(null,arguments)}function a(t){var r="function"==typeof Map?new Map:void 0;return(a=function(t){if(null===t||-1===Function.toString.call(t).indexOf("[native code]"))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==r){if(r.has(t))return r.get(t);r.set(t,e)}function e(){return s(t,arguments,u(this).constructor)}return e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),o(e,t)})(t)}function f(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function p(t){var r=function(t,r){if("object"!=typeof t||null===t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==typeof r?r:String(r)}var l=function(t){function r(r){var e;return e=t.call.apply(t,[this].concat([].slice.call(arguments,1)))||this,Error.captureStackTrace&&Error.captureStackTrace(f(e),v),e.name="OpticCreationError",e.optic=r,e}return i(r,t),r}(a(Error)),v=function(t){function r(e,n){var i;return i=t.call.apply(t,[this].concat([].slice.call(arguments,2)))||this,Error.captureStackTrace&&Error.captureStackTrace(f(i),r),i.name="OpticComposeError",i.optic1=e,i.optic2=n,i}return i(r,t),r}(a(Error)),h=function(t){function r(r,e){var n;return n=t.call.apply(t,[this].concat([].slice.call(arguments,2)))||this,Error.captureStackTrace&&Error.captureStackTrace(f(n),v),n.name="UnavailableOpticOperationError",n.operation=r,n.optic=e,n}return i(r,t),r}(a(Error)),y=function t(r,e){void 0===e&&(e=r.length);var n=[].slice.call(arguments,2);return e<=n.length?r.apply(void 0,n):function(){return t.apply(void 0,[r,e].concat(n,[].slice.call(arguments)))}},w=y(function(t,r){return r[t]}),g=y(function(t,r,e){var i;return e[t]?n({},e,((i={})[t]=r,i)):e}),d=y(function(t,r,e){return e.map(function(e,n){return n==t?r:e})}),m=function(){function t(t,r){this.reduce=t||function(t,e,n){return r(n).reduce(t,e)},this.toArray=r||function(r){return t(function(t,r){return t.concat(r)},[],r)}}return e(t,[{key:"asFold",get:function(){return this}}]),t}(),k=y(function(t){return new m(t,null)}),b=y(function(t){return new m(null,t)}),O=y(function(t,r){return new m(t,r)}),A=Symbol("notFound"),P=function(t){return t===A},S=function(t){return P(t)?[]:[t]},F=function(){function t(t){var r=this;this.preview=t,this.reduce=function(t,e,n){return S(r.preview(n)).reduce(t,e)},this.toArray=function(t){return S(r.preview(t))}}return e(t,[{key:"asFold",get:function(){return O(this.reduce,this.toArray)}},{key:"asPartialGetter",get:function(){return this}}]),t}(),G=y(function(t){return new F(t)}),T=function(){function t(t){var r=this;this.get=t,this.reduce=function(t,e,n){return t(e,r.get(n))},this.toArray=function(t){return[r.get(t)]},this.preview=this.get}return e(t,[{key:"asFold",get:function(){return O(this.reduce,this.toArray)}},{key:"asPartialGetter",get:function(){return G(this.get)}},{key:"asGetter",get:function(){return this}}]),t}(),E=y(function(t){return new T(t)}),R=function(){function t(t){var r=this;this.over=t,this.set=function(t,e){return r.over(function(){return t},e)}}return e(t,[{key:"asSetter",get:function(){return this}}]),t}(),j=y(function(t){return new R(t)}),_=function(){function t(t,r,e){var n=this;this.reduce=t||function(t,e,n){return r(n).reduce(t,e)},this.toArray=r||function(r){return t(function(t,r){return t.concat(r)},[],r)},this.over=e,this.set=function(t,r){return n.over(function(){return t},r)}}return e(t,[{key:"asSetter",get:function(){return j(this.over)}},{key:"asFold",get:function(){return O(this.reduce,this.toArray)}},{key:"asTraversal",get:function(){return this}}]),t}(),x=y(function(t,r){return new _(t,null,r)}),L=y(function(t,r){return new _(null,t,r)}),C=y(function(t,r,e){return new _(t,r,e)}),N=C(function(t,r,e){return e.reduce(t,r)},function(t){return[].concat(t)},function(t,r){return r.map(t)}),M=L(function(t){return[].concat(Object.entries(t))},function(t,r){return Object.fromEntries([].concat(Object.entries(r)).map(t))}),U=function(){function t(t,r){var e=this;this.preview=t,this.set=r,this.over=function(t,r){var n=e.preview(r);return P(n)?r:e.set(t(n),r)},this.reduce=function(t,r,n){return S(e.preview(n)).reduce(t,r)},this.toArray=function(t){return S(e.preview(t))}}return e(t,[{key:"asSetter",get:function(){return j(this.over)}},{key:"asFold",get:function(){return O(this.reduce,this.toArray)}},{key:"asTraversal",get:function(){return C(this.reduce,this.toArray,this.over)}},{key:"asPartialGetter",get:function(){return G(this.preview)}},{key:"asOptional",get:function(){return this}}]),t}(),I=y(function(t,r){return new U(t,r)}),D=function(t){return I(function(r){return r[t]||A},function(r,e){var i;return e[t]?n({},e,((i={})[t]=r,i)):e})},B=function(t){return I(function(r){return r[t]||A},function(r,e){return e[t]?d(t,r,e):e})},J=function(){function t(t,r){var e=this;this.get=t,this.set=r,this.over=function(t,r){return e.set(t(e.get(r)),r)},this.reduce=function(t,r,n){return t(r,e.get(n))},this.toArray=function(t){return[e.get(t)]},this.preview=this.get}return e(t,[{key:"asSetter",get:function(){return j(this.over)}},{key:"asFold",get:function(){return O(this.reduce,this.toArray)}},{key:"asTraversal",get:function(){return C(this.reduce,this.toArray,this.over)}},{key:"asOptional",get:function(){return I(this.get,this.set)}},{key:"asGetter",get:function(){return E(this.get)}},{key:"asPartialGetter",get:function(){return G(this.get)}},{key:"asLens",get:function(){return this}}]),t}(),q=y(function(t,r){return new J(t,r)}),z=function(t){return q(w(t),d(t))},H=function(t){return q(function(r){return P(r)?A:r[t]||A},function(r,e){var i;return P(r)?function(t,r){if(null==t)return{};var e,n,i={},u=Object.keys(t);for(n=0;n<u.length;n++)r.indexOf(e=u[n])>=0||(i[e]=t[e]);return i}(e,[t].map(p)):n({},e,((i={})[t]=r,i))})},K=function(){function t(t){this.review=t}return e(t,[{key:"asReviewer",get:function(){return this}}]),t}(),Q=y(function(t){return new K(t)}),V=function(){function t(t,r,e){var n=this;this.preview=t,this.set=r,this.review=e,this.over=function(t,r){var e=n.preview(r);return P(e)?r:n.set(t(e),r)},this.reduce=function(t,r,e){return S(n.preview(e)).reduce(t,r)},this.toArray=function(t){return S(n.preview(t))}}return e(t,[{key:"asSetter",get:function(){return j(this.over)}},{key:"asFold",get:function(){return O(this.reduce,this.toArray)}},{key:"asTraversal",get:function(){return C(this.reduce,this.toArray,this.over)}},{key:"asPartialGetter",get:function(){return G(this.preview)}},{key:"asOptional",get:function(){return I(this.preview,this.set)}},{key:"asReviewer",get:function(){return Q(this.review)}},{key:"asPrism",get:function(){return this}}]),t}(),W=y(function(t,r,e){return new V(t,r,e)}),X=function(t,r){return Object.keys(t).every(function(e){return r&&r[e]&&r[e]===t[e]})},Y=function(){function t(t,r){var e=this;this.get=t,this.review=r,this.set=function(t){return e.review(t)},this.over=function(t,r){return e.review(t(e.get(r)))},this.reduce=function(t,r,n){return t(r,e.get(n))},this.toArray=function(t){return[e.get(t)]},this.preview=this.get}return e(t,[{key:"asSetter",get:function(){return j(this.over)}},{key:"asFold",get:function(){return O(this.reduce,this.toArray)}},{key:"asTraversal",get:function(){return C(this.reduce,this.toArray,this.over)}},{key:"asOptional",get:function(){return I(this.get,this.set)}},{key:"asPrism",get:function(){return W(this.get,this.set,this.review)}},{key:"asReviewer",get:function(){return Q(this.review)}},{key:"asGetter",get:function(){return E(this.get)}},{key:"asPartialGetter",get:function(){return G(this.get)}},{key:"asLens",get:function(){return q(this.get,this.set)}},{key:"asIso",get:function(){return this}}]),t}(),Z=y(function(t,r){return new Y(t,r)}),$=function(t,r){return function(e){var n=t(e);return P(n)?A:r(n)}},tt=function(t,r){return function(e,n,i){return r(function(r,n){return t(e,r,n)},n,i)}},rt=function(t,r){if(t.asLens&&r.asLens){var e=t.asLens,n=r.asLens;return q(function(t){return n.get(e.get(t))},function(t,r){return e.over(function(r){return n.set(t,r)},r)})}if(t.asPrism&&r.asPrism){var i=t.asPrism,u=r.asPrism;return W($(i.preview,u.preview),function(t,r){return i.over(function(r){return u.set(t,r)},r)},function(t){return u.review(i.review(t))})}if(t.asOptional&&r.asOptional){var o=t.asOptional,c=r.asOptional;return I($(o.preview,c.preview),function(t,r){return o.over(function(r){return c.set(t,r)},r)})}if(t.asTraversal&&r.asTraversal){var s=t.asTraversal,a=r.asTraversal;return C(tt(s.reduce,a.reduce),function(t){return s.toArray(t).flatMap(function(t){return a.toArray(t)})},function(t,r){return s.over(function(r){return a.over(t,r)},r)})}if(t.asGetter&&r.asGetter){var f=t.asGetter,p=r.asGetter;return E(function(t){return p.get(f.get(t))})}if(t.asPartialGetter&&r.asPartialGetter)return G($(t.asPartialGetter.preview,r.asPartialGetter.preview));if(t.asFold&&r.asFold){var l=t.asFold,h=r.asFold;return O(tt(l.reduce,h.reduce),function(t){return l.toArray(t).flatMap(function(t){return h.toArray(t)})})}if(t.asSetter&&r.asSetter){var y=t.asSetter,w=r.asSetter;return j(function(t,r){return y.over(function(r){return w.over(t,r)},r)})}if(t.asReviewer&&r.asReviewer){var g=t.asReviewer,d=r.asReviewer;return Q(function(t){return d.review(g.review(t))})}throw new v(t.constructor.name,r.constructor.name,"incompatible optics")},et=function(t){return"string"==typeof t||t instanceof String?H(t):"number"!=typeof t||isNaN(t)?t:z(t)},nt=function(){return[].slice.call(arguments).flat().map(et).reduce(rt)},it=nt,ut=nt,ot=y(function(t,r,e,n){if(t.asFold)return t.asFold.reduce(r,e,n);throw new h("reduce",t.constructor.name,"reduce is not supported by "+t.constructor.name)}),ct=y(function(t,r){if(t.asFold)return t.asFold.toArray(r);throw new h("toArray",t.constructor.name,"toArray is not supported by "+t.constructor.name)}),st=y(function(t,r){if(t.asPartialGetter)return t.asPartialGetter.preview(r);throw new h("preview",t.constructor.name,"preview is not supported by "+t.constructor.name)}),at=y(function(t,r){if(t.asGetter)return t.asGetter.get(r);throw new h("view/get",t.constructor.name,"view/get is not supported by "+t.constructor.name)}),ft=(y(function(t,r,e){if(t.asSetter)return t.asSetter.set(r,e);throw new h("set",t.constructor.name,"set is not supported by "+t.constructor.name)}),y(function(t,r,e){if(t.asSetter)return t.asSetter.over(r,e);throw new h("over",t.constructor.name,"over is not supported by "+t.constructor.name)})),pt=y(function(t,r){if(t.asReviewer)return t.asReviewer.review(r);throw new h("review",t.constructor.name,"review is not supported by "+t.constructor.name)});t.OpticComposeError=v,t.OpticCreationError=l,t.UnavailableOpticOperationError=h,t.alter=H,t.compose=function(){var t=arguments;return function(r){return[].slice.call(t).reduceRight(function(t,r){return r(t)},r)}},t.composeOptics=nt,t.curry=y,t.entries=M,t.fold=O,t.foldFromReduce=k,t.foldFromToArray=b,t.get=w,t.getter=E,t.has=function(t){return W(function(r){return X(t,r)?n({},r):A},function(r,e){return X(t,e)?n({},r,t):n({},e)},function(r){return n({},r,t)})},t.isNotFound=P,t.iso=Z,t.ix=z,t.lens=q,t.maybe=function(t){if("string"==typeof t||t instanceof String)return D(t);if("number"==typeof t&&!isNaN(t))return B(t);if(t.asLens){var r=t.asLens;return I(r.get,r.set)}throw new l("Optional",typeof t+" cannot be turned into optional")},t.mustBePresent=function(t){return q(w(t),g(t))},t.notFound=A,t.notFoundToList=S,t.optic=it,t.optional=I,t.optionalIx=B,t.optionalProp=D,t.over=ft,t.partialGetter=G,t.path=ut,t.preview=st,t.prism=W,t.reduce=ot,t.review=pt,t.reviewer=Q,t.set=g,t.setIndex=d,t.setter=j,t.single=function(t){return Z(function(r){return r[t]},function(r){var e;return(e={})[t]=r,e})},t.toArray=ct,t.toUpper=function(t){return t.toUpperCase()},t.traversal=C,t.traversalFromReduce=x,t.traversalFromToArray=L,t.values=N,t.view=at});
//# sourceMappingURL=optic.umd.js.map
