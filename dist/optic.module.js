function t(t,r){for(var e=0;e<r.length;e++){var n=r[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function r(r,e,n){return e&&t(r.prototype,e),n&&t(r,n),r}function e(){return(e=Object.assign||function(t){for(var r=1;r<arguments.length;r++){var e=arguments[r];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}return t}).apply(this,arguments)}function n(t,r){t.prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r}function i(t){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u(t,r){return(u=Object.setPrototypeOf||function(t,r){return t.__proto__=r,t})(t,r)}function o(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function c(t,r,e){return(c=o()?Reflect.construct:function(t,r,e){var n=[null];n.push.apply(n,r);var i=new(Function.bind.apply(t,n));return e&&u(i,e.prototype),i}).apply(null,arguments)}function s(t){var r="function"==typeof Map?new Map:void 0;return(s=function(t){if(null===t||-1===Function.toString.call(t).indexOf("[native code]"))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==r){if(r.has(t))return r.get(t);r.set(t,e)}function e(){return c(t,arguments,i(this).constructor)}return e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),u(e,t)})(t)}function a(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function f(t){var r=function(t,r){if("object"!=typeof t||null===t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==typeof r?r:String(r)}var h=function(t){function r(r){var e;return e=t.call.apply(t,[this].concat([].slice.call(arguments,1)))||this,Error.captureStackTrace&&Error.captureStackTrace(a(e),v),e.name="OpticCreationError",e.optic=r,e}return n(r,t),r}(s(Error)),v=function(t){function r(e,n){var i;return i=t.call.apply(t,[this].concat([].slice.call(arguments,2)))||this,Error.captureStackTrace&&Error.captureStackTrace(a(i),r),i.name="OpticComposeError",i.optic1=e,i.optic2=n,i}return n(r,t),r}(s(Error)),p=function(t){function r(r,e){var n;return n=t.call.apply(t,[this].concat([].slice.call(arguments,2)))||this,Error.captureStackTrace&&Error.captureStackTrace(a(n),v),n.name="UnavailableOpticOperationError",n.operation=r,n.optic=e,n}return n(r,t),r}(s(Error)),l=function t(r,e){void 0===e&&(e=r.length);var n=[].slice.call(arguments,2);return e<=n.length?r.apply(void 0,n):function(){return t.apply(void 0,[r,e].concat(n,[].slice.call(arguments)))}},y=function(){var t=arguments;return function(r){return[].slice.call(t).reduceRight(function(t,r){return r(t)},r)}},w=l(function(t,r){return r[t]}),g=l(function(t,r,n){var i;return n[t]?e({},n,((i={})[t]=r,i)):n}),d=l(function(t,r,e){return e.map(function(e,n){return n==t?r:e})}),k=function(t){return t.toUpperCase()},m=function(){function t(t,r){this.reduce=t||function(t,e,n){return r(n).reduce(t,e)},this.toArray=r||function(r){return t(function(t,r){return t.concat(r)},[],r)}}return r(t,[{key:"asFold",get:function(){return this}}]),t}(),b=l(function(t){return new m(t,null)}),O=l(function(t){return new m(null,t)}),S=l(function(t,r){return new m(t,r)}),P=Symbol("notFound"),A=function(t){return t===P},G=function(t){return A(t)?[]:[t]},F=function(){function t(t){var r=this;this.preview=t,this.reduce=function(t,e,n){return G(r.preview(n)).reduce(t,e)},this.toArray=function(t){return G(r.preview(t))}}return r(t,[{key:"asFold",get:function(){return S(this.reduce,this.toArray)}},{key:"asPartialGetter",get:function(){return this}}]),t}(),T=l(function(t){return new F(t)}),j=function(){function t(t){var r=this;this.get=t,this.reduce=function(t,e,n){return t(e,r.get(n))},this.toArray=function(t){return[r.get(t)]},this.preview=this.get}return r(t,[{key:"asFold",get:function(){return S(this.reduce,this.toArray)}},{key:"asPartialGetter",get:function(){return T(this.get)}},{key:"asGetter",get:function(){return this}}]),t}(),E=l(function(t){return new j(t)}),R=function(){function t(t){var r=this;this.over=t,this.set=function(t,e){return r.over(function(){return t},e)}}return r(t,[{key:"asSetter",get:function(){return this}}]),t}(),_=l(function(t){return new R(t)}),L=function(){function t(t,r,e){var n=this;this.reduce=t||function(t,e,n){return r(n).reduce(t,e)},this.toArray=r||function(r){return t(function(t,r){return t.concat(r)},[],r)},this.over=e,this.set=function(t,r){return n.over(function(){return t},r)}}return r(t,[{key:"asSetter",get:function(){return _(this.over)}},{key:"asFold",get:function(){return S(this.reduce,this.toArray)}},{key:"asTraversal",get:function(){return this}}]),t}(),x=l(function(t,r){return new L(t,null,r)}),M=l(function(t,r){return new L(null,t,r)}),N=l(function(t,r,e){return new L(t,r,e)}),C=N(function(t,r,e){return e.reduce(t,r)},function(t){return[].concat(t)},function(t,r){return r.map(t)}),D=M(function(t){return[].concat(Object.entries(t))},function(t,r){return Object.fromEntries([].concat(Object.entries(r)).map(t))}),U=function(){function t(t,r){var e=this;this.preview=t,this.set=r,this.over=function(t,r){var n=e.preview(r);return A(n)?r:e.set(t(n),r)},this.reduce=function(t,r,n){return G(e.preview(n)).reduce(t,r)},this.toArray=function(t){return G(e.preview(t))}}return r(t,[{key:"asSetter",get:function(){return _(this.over)}},{key:"asFold",get:function(){return S(this.reduce,this.toArray)}},{key:"asTraversal",get:function(){return N(this.reduce,this.toArray,this.over)}},{key:"asPartialGetter",get:function(){return T(this.preview)}},{key:"asOptional",get:function(){return this}}]),t}(),I=l(function(t,r){return new U(t,r)}),q=function(t){return I(function(r){return r[t]||P},function(r,n){var i;return n[t]?e({},n,((i={})[t]=r,i)):n})},z=function(t){return I(function(r){return r[t]||P},function(r,e){return e[t]?d(t,r,e):e})},B=function(t){if("string"==typeof t||t instanceof String)return q(t);if("number"==typeof t&&!isNaN(t))return z(t);if(t.asLens){var r=t.asLens;return I(r.get,r.set)}throw new h("Optional",typeof t+" cannot be turned into optional")},H=function(){function t(t,r){var e=this;this.get=t,this.set=r,this.over=function(t,r){return e.set(t(e.get(r)),r)},this.reduce=function(t,r,n){return t(r,e.get(n))},this.toArray=function(t){return[e.get(t)]},this.preview=this.get}return r(t,[{key:"asSetter",get:function(){return _(this.over)}},{key:"asFold",get:function(){return S(this.reduce,this.toArray)}},{key:"asTraversal",get:function(){return N(this.reduce,this.toArray,this.over)}},{key:"asOptional",get:function(){return I(this.get,this.set)}},{key:"asGetter",get:function(){return E(this.get)}},{key:"asPartialGetter",get:function(){return T(this.get)}},{key:"asLens",get:function(){return this}}]),t}(),J=l(function(t,r){return new H(t,r)}),K=function(t){return J(w(t),d(t))},Q=function(t){return J(w(t),g(t))},V=function(t){return J(function(r){return A(r)?P:r[t]||P},function(r,n){var i;return A(r)?function(t,r){if(null==t)return{};var e,n,i={},u=Object.keys(t);for(n=0;n<u.length;n++)r.indexOf(e=u[n])>=0||(i[e]=t[e]);return i}(n,[t].map(f)):e({},n,((i={})[t]=r,i))})},W=function(){function t(t){this.review=t}return r(t,[{key:"asReviewer",get:function(){return this}}]),t}(),X=l(function(t){return new W(t)}),Y=function(){function t(t,r,e){var n=this;this.preview=t,this.set=r,this.review=e,this.over=function(t,r){var e=n.preview(r);return A(e)?r:n.set(t(e),r)},this.reduce=function(t,r,e){return G(n.preview(e)).reduce(t,r)},this.toArray=function(t){return G(n.preview(t))}}return r(t,[{key:"asSetter",get:function(){return _(this.over)}},{key:"asFold",get:function(){return S(this.reduce,this.toArray)}},{key:"asTraversal",get:function(){return N(this.reduce,this.toArray,this.over)}},{key:"asPartialGetter",get:function(){return T(this.preview)}},{key:"asOptional",get:function(){return I(this.preview,this.set)}},{key:"asReviewer",get:function(){return X(this.review)}},{key:"asPrism",get:function(){return this}}]),t}(),Z=l(function(t,r,e){return new Y(t,r,e)}),$=function(t,r){return Object.keys(t).every(function(e){return r&&r[e]&&r[e]===t[e]})},tt=function(t){return Z(function(r){return $(t,r)?e({},r):P},function(r,n){return $(t,n)?e({},r,t):e({},n)},function(r){return e({},r,t)})},rt=function(){function t(t,r){var e=this;this.get=t,this.review=r,this.set=function(t){return e.review(t)},this.over=function(t,r){return e.review(t(e.get(r)))},this.reduce=function(t,r,n){return t(r,e.get(n))},this.toArray=function(t){return[e.get(t)]},this.preview=this.get}return r(t,[{key:"asSetter",get:function(){return _(this.over)}},{key:"asFold",get:function(){return S(this.reduce,this.toArray)}},{key:"asTraversal",get:function(){return N(this.reduce,this.toArray,this.over)}},{key:"asOptional",get:function(){return I(this.get,this.set)}},{key:"asPrism",get:function(){return Z(this.get,this.set,this.review)}},{key:"asReviewer",get:function(){return X(this.review)}},{key:"asGetter",get:function(){return E(this.get)}},{key:"asPartialGetter",get:function(){return T(this.get)}},{key:"asLens",get:function(){return J(this.get,this.set)}},{key:"asIso",get:function(){return this}}]),t}(),et=l(function(t,r){return new rt(t,r)}),nt=function(t){return et(function(r){return r[t]},function(r){var e;return(e={})[t]=r,e})},it=function(t,r){return function(e){var n=t(e);return A(n)?P:r(n)}},ut=function(t,r){return function(e,n,i){return r(function(r,n){return t(e,r,n)},n,i)}},ot=function(t,r){if(t.asLens&&r.asLens){var e=t.asLens,n=r.asLens;return J(function(t){return n.get(e.get(t))},function(t,r){return e.over(function(r){return n.set(t,r)},r)})}if(t.asPrism&&r.asPrism){var i=t.asPrism,u=r.asPrism;return Z(it(i.preview,u.preview),function(t,r){return i.over(function(r){return u.set(t,r)},r)},function(t){return u.review(i.review(t))})}if(t.asOptional&&r.asOptional){var o=t.asOptional,c=r.asOptional;return I(it(o.preview,c.preview),function(t,r){return o.over(function(r){return c.set(t,r)},r)})}if(t.asTraversal&&r.asTraversal){var s=t.asTraversal,a=r.asTraversal;return N(ut(s.reduce,a.reduce),function(t){return s.toArray(t).flatMap(function(t){return a.toArray(t)})},function(t,r){return s.over(function(r){return a.over(t,r)},r)})}if(t.asGetter&&r.asGetter){var f=t.asGetter,h=r.asGetter;return E(function(t){return h.get(f.get(t))})}if(t.asPartialGetter&&r.asPartialGetter)return T(it(t.asPartialGetter.preview,r.asPartialGetter.preview));if(t.asFold&&r.asFold){var p=t.asFold,l=r.asFold;return S(ut(p.reduce,l.reduce),function(t){return p.toArray(t).flatMap(function(t){return l.toArray(t)})})}if(t.asSetter&&r.asSetter){var y=t.asSetter,w=r.asSetter;return _(function(t,r){return y.over(function(r){return w.over(t,r)},r)})}if(t.asReviewer&&r.asReviewer){var g=t.asReviewer,d=r.asReviewer;return X(function(t){return d.review(g.review(t))})}throw new v(t.constructor.name,r.constructor.name,"incompatible optics")},ct=function(t){return"string"==typeof t||t instanceof String?V(t):"number"!=typeof t||isNaN(t)?t:K(t)},st=function(){return[].slice.call(arguments).flat().map(ct).reduce(ot)},at=st,ft=st,ht=l(function(t,r,e,n){if(t.asFold)return t.asFold.reduce(r,e,n);throw new p("reduce",t.constructor.name,"reduce is not supported by "+t.constructor.name)}),vt=l(function(t,r){if(t.asFold)return t.asFold.toArray(r);throw new p("toArray",t.constructor.name,"toArray is not supported by "+t.constructor.name)}),pt=l(function(t,r){if(t.asPartialGetter)return t.asPartialGetter.preview(r);throw new p("preview",t.constructor.name,"preview is not supported by "+t.constructor.name)}),lt=l(function(t,r){if(t.asGetter)return t.asGetter.get(r);throw new p("view/get",t.constructor.name,"view/get is not supported by "+t.constructor.name)}),yt=(l(function(t,r,e){if(t.asSetter)return t.asSetter.set(r,e);throw new p("set",t.constructor.name,"set is not supported by "+t.constructor.name)}),l(function(t,r,e){if(t.asSetter)return t.asSetter.over(r,e);throw new p("over",t.constructor.name,"over is not supported by "+t.constructor.name)})),wt=l(function(t,r){if(t.asReviewer)return t.asReviewer.review(r);throw new p("review",t.constructor.name,"review is not supported by "+t.constructor.name)});export{v as OpticComposeError,h as OpticCreationError,p as UnavailableOpticOperationError,V as alter,y as compose,st as composeOptics,l as curry,D as entries,S as fold,b as foldFromReduce,O as foldFromToArray,w as get,E as getter,tt as has,A as isNotFound,et as iso,K as ix,J as lens,B as maybe,Q as mustBePresent,P as notFound,G as notFoundToList,at as optic,I as optional,z as optionalIx,q as optionalProp,yt as over,T as partialGetter,ft as path,pt as preview,Z as prism,ht as reduce,wt as review,X as reviewer,g as set,d as setIndex,_ as setter,nt as single,vt as toArray,k as toUpper,N as traversal,x as traversalFromReduce,M as traversalFromToArray,C as values,lt as view};
//# sourceMappingURL=optic.module.js.map
