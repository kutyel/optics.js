class t extends Error{constructor(t,...r){super(...r),Error.captureStackTrace&&Error.captureStackTrace(this,e),this.name="OpticCreationError",this.optic=t}}class e extends Error{constructor(t,r,...s){super(...s),Error.captureStackTrace&&Error.captureStackTrace(this,e),this.name="OpticComposeError",this.optic1=t,this.optic2=r}}class r extends Error{constructor(t,r,...s){super(...s),Error.captureStackTrace&&Error.captureStackTrace(this,e),this.name="UnavailableOpticOperationError",this.operation=t,this.optic=r}}const s=(t,e=t.length,...r)=>e<=r.length?t(...r):(...i)=>s(t,e,...r,...i),i=(...t)=>e=>t.reduceRight((t,e)=>e(t),e),a=s((t,e)=>e[t]),o=s((t,e,r)=>r[t]?{...r,[t]:e}:r),n=s((t,e,r)=>r.map((r,s)=>s==t?e:r)),c=t=>t.toUpperCase();class u{constructor(t,e){this.reduce=t||((t,r,s)=>e(s).reduce(t,r)),this.toArray=e||(e=>t((t,e)=>t.concat(e),[],e))}get asFold(){return this}}const h=s(t=>new u(t,null)),v=s(t=>new u(null,t)),p=s((t,e)=>new u(t,e)),w=Symbol("notFound"),g=t=>t===w,l=t=>g(t)?[]:[t];class d{constructor(t){this.preview=t,this.reduce=(t,e,r)=>l(this.preview(r)).reduce(t,e),this.toArray=t=>l(this.preview(t))}get asFold(){return p(this.reduce,this.toArray)}get asPartialGetter(){return this}}const y=s(t=>new d(t));class m{constructor(t){this.get=t,this.reduce=(t,e,r)=>t(e,this.get(r)),this.toArray=t=>[this.get(t)],this.preview=this.get}get asFold(){return p(this.reduce,this.toArray)}get asPartialGetter(){return y(this.get)}get asGetter(){return this}}const f=s(t=>new m(t));class A{constructor(t){this.over=t,this.set=(t,e)=>this.over(()=>t,e)}get asSetter(){return this}}const S=s(t=>new A(t));class G{constructor(t,e,r){this.reduce=t||((t,r,s)=>e(s).reduce(t,r)),this.toArray=e||(e=>t((t,e)=>t.concat(e),[],e)),this.over=r,this.set=(t,e)=>this.over(()=>t,e)}get asSetter(){return S(this.over)}get asFold(){return p(this.reduce,this.toArray)}get asTraversal(){return this}}const P=s((t,e)=>new G(t,null,e)),b=s((t,e)=>new G(null,t,e)),F=s((t,e,r)=>new G(t,e,r)),O=F((t,e,r)=>r.reduce(t,e),t=>[...t],(t,e)=>e.map(t)),T=b(t=>[...Object.entries(t)],(t,e)=>Object.fromEntries([...Object.entries(e)].map(t)));class E{constructor(t,e){this.preview=t,this.set=e,this.over=(t,e)=>{const r=this.preview(e);return g(r)?e:this.set(t(r),e)},this.reduce=(t,e,r)=>l(this.preview(r)).reduce(t,e),this.toArray=t=>l(this.preview(t))}get asSetter(){return S(this.over)}get asFold(){return p(this.reduce,this.toArray)}get asTraversal(){return F(this.reduce,this.toArray,this.over)}get asPartialGetter(){return y(this.preview)}get asOptional(){return this}}const R=s((t,e)=>new E(t,e)),L=t=>R(e=>e[t]||w,(e,r)=>r[t]?{...r,[t]:e}:r),k=t=>R(e=>e[t]||w,(e,r)=>r[t]?n(t,e,r):r),j=e=>{if("string"==typeof e||e instanceof String)return L(e);if("number"==typeof e&&!isNaN(e))return k(e);if(e.asLens){const t=e.asLens;return R(t.get,t.set)}throw new t("Optional",typeof e+" cannot be turned into optional")};class x{constructor(t,e){this.get=t,this.set=e,this.over=(t,e)=>this.set(t(this.get(e)),e),this.reduce=(t,e,r)=>t(e,this.get(r)),this.toArray=t=>[this.get(t)],this.preview=this.get}get asSetter(){return S(this.over)}get asFold(){return p(this.reduce,this.toArray)}get asTraversal(){return F(this.reduce,this.toArray,this.over)}get asOptional(){return R(this.get,this.set)}get asGetter(){return f(this.get)}get asPartialGetter(){return y(this.get)}get asLens(){return this}}const N=s((t,e)=>new x(t,e)),C=t=>N(a(t),n(t)),M=t=>N(a(t),o(t)),U=t=>N(e=>g(e)?w:e[t]||w,(e,r)=>{if(g(e)){const{[t]:e,...s}=r;return s}return{...r,[t]:e}});class I{constructor(t){this.review=t}get asReviewer(){return this}}const q=s(t=>new I(t));class z{constructor(t,e,r){this.preview=t,this.set=e,this.review=r,this.over=(t,e)=>{const r=this.preview(e);return g(r)?e:this.set(t(r),e)},this.reduce=(t,e,r)=>l(this.preview(r)).reduce(t,e),this.toArray=t=>l(this.preview(t))}get asSetter(){return S(this.over)}get asFold(){return p(this.reduce,this.toArray)}get asTraversal(){return F(this.reduce,this.toArray,this.over)}get asPartialGetter(){return y(this.preview)}get asOptional(){return R(this.preview,this.set)}get asReviewer(){return q(this.review)}get asPrism(){return this}}const B=s((t,e,r)=>new z(t,e,r)),D=(t,e)=>Object.keys(t).every(r=>e&&e[r]&&e[r]===t[r]),H=t=>B(e=>D(t,e)?{...e}:w,(e,r)=>D(t,r)?{...e,...t}:{...r},e=>({...e,...t}));class J{constructor(t,e){this.get=t,this.review=e,this.set=t=>this.review(t),this.over=(t,e)=>this.review(t(this.get(e))),this.reduce=(t,e,r)=>t(e,this.get(r)),this.toArray=t=>[this.get(t)],this.preview=this.get}get asSetter(){return S(this.over)}get asFold(){return p(this.reduce,this.toArray)}get asTraversal(){return F(this.reduce,this.toArray,this.over)}get asOptional(){return R(this.get,this.set)}get asPrism(){return B(this.get,this.set,this.review)}get asReviewer(){return q(this.review)}get asGetter(){return f(this.get)}get asPartialGetter(){return y(this.get)}get asLens(){return N(this.get,this.set)}get asIso(){return this}}const K=s((t,e)=>new J(t,e)),Q=t=>K(e=>e[t],e=>({[t]:e})),V=(t,e)=>r=>{const s=t(r);return g(s)?w:e(s)},W=(t,e)=>(r,s,i)=>e((e,s)=>t(r,e,s),s,i),X=(t,r)=>{if(t.asLens&&r.asLens){const e=t.asLens,s=r.asLens;return N(t=>s.get(e.get(t)),(t,r)=>e.over(e=>s.set(t,e),r))}if(t.asPrism&&r.asPrism){const e=t.asPrism,s=r.asPrism;return B(V(e.preview,s.preview),(t,r)=>e.over(e=>s.set(t,e),r),t=>s.review(e.review(t)))}if(t.asOptional&&r.asOptional){const e=t.asOptional,s=r.asOptional;return R(V(e.preview,s.preview),(t,r)=>e.over(e=>s.set(t,e),r))}if(t.asTraversal&&r.asTraversal){const e=t.asTraversal,s=r.asTraversal;return F(W(e.reduce,s.reduce),t=>e.toArray(t).flatMap(t=>s.toArray(t)),(t,r)=>e.over(e=>s.over(t,e),r))}if(t.asGetter&&r.asGetter){const e=t.asGetter,s=r.asGetter;return f(t=>s.get(e.get(t)))}if(t.asPartialGetter&&r.asPartialGetter)return y(V(t.asPartialGetter.preview,r.asPartialGetter.preview));if(t.asFold&&r.asFold){const e=t.asFold,s=r.asFold;return p(W(e.reduce,s.reduce),t=>e.toArray(t).flatMap(t=>s.toArray(t)))}if(t.asSetter&&r.asSetter){const e=t.asSetter,s=r.asSetter;return S((t,r)=>e.over(e=>s.over(t,e),r))}if(t.asReviewer&&r.asReviewer){const e=t.asReviewer,s=r.asReviewer;return q(t=>s.review(e.review(t)))}throw new e(t.constructor.name,r.constructor.name,"incompatible optics")},Y=t=>"string"==typeof t||t instanceof String?U(t):"number"!=typeof t||isNaN(t)?t:C(t),Z=(...t)=>t.flat().map(Y).reduce(X),$=Z,_=Z,tt=s((t,e,s,i)=>{if(t.asFold)return t.asFold.reduce(e,s,i);throw new r("reduce",t.constructor.name,"reduce is not supported by "+t.constructor.name)}),et=s((t,e)=>{if(t.asFold)return t.asFold.toArray(e);throw new r("toArray",t.constructor.name,"toArray is not supported by "+t.constructor.name)}),rt=s((t,e)=>{if(t.asPartialGetter)return t.asPartialGetter.preview(e);throw new r("preview",t.constructor.name,"preview is not supported by "+t.constructor.name)}),st=s((t,e)=>{if(t.asGetter)return t.asGetter.get(e);throw new r("view/get",t.constructor.name,"view/get is not supported by "+t.constructor.name)}),it=(s((t,e,s)=>{if(t.asSetter)return t.asSetter.set(e,s);throw new r("set",t.constructor.name,"set is not supported by "+t.constructor.name)}),s((t,e,s)=>{if(t.asSetter)return t.asSetter.over(e,s);throw new r("over",t.constructor.name,"over is not supported by "+t.constructor.name)})),at=s((t,e)=>{if(t.asReviewer)return t.asReviewer.review(e);throw new r("review",t.constructor.name,"review is not supported by "+t.constructor.name)});export{e as OpticComposeError,t as OpticCreationError,r as UnavailableOpticOperationError,U as alter,i as compose,Z as composeOptics,s as curry,T as entries,p as fold,h as foldFromReduce,v as foldFromToArray,a as get,f as getter,H as has,g as isNotFound,K as iso,C as ix,N as lens,j as maybe,M as mustBePresent,w as notFound,l as notFoundToList,$ as optic,R as optional,k as optionalIx,L as optionalProp,it as over,y as partialGetter,_ as path,rt as preview,B as prism,tt as reduce,at as review,q as reviewer,o as set,n as setIndex,S as setter,Q as single,et as toArray,c as toUpper,F as traversal,P as traversalFromReduce,b as traversalFromToArray,O as values,st as view};
//# sourceMappingURL=optic.modern.js.map
